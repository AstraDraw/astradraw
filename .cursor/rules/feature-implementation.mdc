---
description: "Feature implementation patterns - request for implementation details"
---

# Feature Implementation Patterns

**For step-by-step feature workflow, use `/new-feature` command instead.**

This rule contains implementation patterns and checklists.

## Implementation Checklist

### Backend Changes

- [ ] Update Prisma schema if needed (`backend/prisma/schema.prisma`)
- [ ] Create/update service and controller
- [ ] Register in module and `app.module.ts`
- [ ] Add JWT guard for protected endpoints
- [ ] Run `npm run build` to verify

### Frontend Changes

- [ ] Create component(s) in `frontend/excalidraw-app/components/<Feature>/`
- [ ] Add CSS Module styles with dark mode support (`@include dark-mode`)
- [ ] Add translation keys to `en.json` and `ru-RU.json`
- [ ] Add API functions to `auth/api/<domain>.ts` (modular API structure)
- [ ] Add React Query hooks in `hooks/use<Feature>.ts`
- [ ] Add loading skeletons if component fetches data

**See:** `/docs/planning/TECHNICAL_DEBT_AND_IMPROVEMENTS.md` for established patterns.

## API Endpoint Patterns

### RESTful Naming

```
GET    /api/v2/workspace/scenes           # List
POST   /api/v2/workspace/scenes           # Create
GET    /api/v2/workspace/scenes/:id       # Get one
PUT    /api/v2/workspace/scenes/:id       # Update
DELETE /api/v2/workspace/scenes/:id       # Delete
```

### Nested Resources

```
GET    /api/v2/workspace/scenes/:sceneId/talktracks
POST   /api/v2/workspace/scenes/:sceneId/talktracks
```

## Loading States (Skeletons)

If your feature displays async data, add skeleton loading states:

```typescript
import { SceneCardSkeletonGrid } from "../Skeletons";

if (isLoading) {
  return <SceneCardSkeletonGrid count={6} />;
}
```

Available: `SceneCardSkeletonGrid`, `CollectionItemSkeletonList`

## State Management Quick Reference

| State Type | Use Case |
|------------|----------|
| `useState` | Component-local state |
| `useRef` | Values that don't trigger re-render |
| Jotai atom | Shared state across components |

For detailed state patterns, see `@frontend-state`.
