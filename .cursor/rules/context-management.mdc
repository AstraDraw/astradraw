---
description: "Guidelines for managing chat context, when to suggest new chats, and cost-efficient development"
---

# Context Management & Chat Efficiency

This rule helps manage chat context to avoid expensive, off-topic conversations.

## When to Suggest a New Chat

**Proactively suggest starting a new chat when:**

1. **Topic Shift**: User asks about a completely different feature/bug
2. **Context Overload**: Conversation has 15+ tool calls or 10+ file edits
3. **Scope Creep**: Original task complete but user wants unrelated features
4. **New Feature Request**: User describes a feature requiring fresh planning

**How to suggest:**

```
üîÑ **Context Check**: I think this would be better handled in a new chat.

**Reason**: [Brief explanation]

**Would you like me to prepare a prompt and file list for a new chat?**
```

## Commands User Can Run Themselves

**Suggest the user run these commands** to save context/cost:

```bash
# Type checking
cd frontend && yarn tsc --noEmit

# Backend build
cd backend && npm run build

# Docker logs
cd deploy && docker compose logs -f api
```

### When AI Should Run Commands
- When output is needed to diagnose an issue
- When the result affects the next coding decision
- When user explicitly asks

## New Chat Prompt Template

When user agrees to a new chat:

```markdown
## Task: [Clear title]

### Problem/Goal
[1-2 sentence description]

### Context
[Relevant background from current chat]

### Files to Review
- `@path/to/file1.ts` - [why relevant]

### Approach
[Suggested steps if known]
```

## Signs Context is Degrading

- Repeating information already discussed
- Forgetting file locations or patterns
- Making errors that contradict earlier work

When noticed:
```
‚ö†Ô∏è **Context Note**: The conversation is getting long. Consider starting a fresh chat with key details.
```

## Workspace Structure

| Folder | Purpose | Indexed? |
|--------|---------|----------|
| `astradraw/` | Main repo (Docker, docs, rules) | ‚úÖ Yes |
| `frontend/` | React/Excalidraw app | ‚ùå No (but accessible) |
| `backend/` | NestJS API | ‚ùå No (but accessible) |
| `room-service/` | WebSocket server | ‚ùå No (but accessible) |

**Suggest separate workspace for intensive work:**
```
üìÇ **Workspace Tip**: For intensive frontend development, consider opening `frontend/` as a separate workspace for full semantic search.
```
