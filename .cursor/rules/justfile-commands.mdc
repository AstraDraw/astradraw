---
description: "Use Justfile commands instead of writing full shell commands"
globs: ["Justfile", "justfile"]
---

# Justfile Commands

This project uses [just](https://github.com/casey/just) for common commands. **Always prefer `just` commands over writing full shell commands.**

## Quick Reference

### Daily Development (most used)

| Command | Description |
|---------|-------------|
| `just dev` | **Start everything with hot-reload** |
| `just dev-stop` | Stop all services |
| `just dev-status` | Check status of all services |

### Code Quality (before commits)

| Command | Description |
|---------|-------------|
| `just check` | Run ALL checks (frontend + backend + room) |
| `just check-frontend` | TypeScript + Prettier + ESLint |
| `just check-backend` | Build + Prettier + ESLint |
| `just fix` | Auto-fix formatting issues |

### Docker Deployment

| Command | Description |
|---------|-------------|
| `just up` | Start with production images (GHCR) |
| `just up-local` | Start with local builds |
| `just up-oidc` | Start with OIDC testing (Dex) |
| `just down` | Stop all containers |
| `just logs` | View all logs |
| `just logs-api` | View API logs only |
| `just fresh` | Fresh start (removes all data) |
| `just fresh-local` | Fresh start with local builds |
| `just build` | Build local images |
| `just clean` | Remove dangling images & build cache |
| `just clean-all` | Deep clean (all unused Docker data) |

### Database

| Command | Description |
|---------|-------------|
| `just db-migrate` | Run Prisma migrations |
| `just db-studio` | Open Prisma Studio |
| `just db-reset` | Reset database (dev only!) |

### Git

| Command | Description |
|---------|-------------|
| `just status` | Git status for all repos |
| `just pull-all` | Pull latest from all repos |
| `just push-all` | Push all repos (main, frontend, backend, room) |
| `just push-main` | Push main repository only |
| `just push-frontend` | Push frontend repository only |
| `just push-backend` | Push backend repository only |
| `just push-room` | Push room-service repository only |

### Setup & Testing

| Command | Description |
|---------|-------------|
| `just setup` | Full setup for new developers |
| `just setup-certs` | Generate SSL certificates |
| `just install` | Install all dependencies |
| `just test-api` | Run backend API tests |
| `just test-navigation` | Interactive navigation test |

### Release

| Command | Description |
|---------|-------------|
| `just release-frontend 0.18.0-beta0.60` | Tag and push frontend |
| `just release-backend 0.7.1` | Tag and push backend |

## Development Modes

| Mode | Command | Use Case |
|------|---------|----------|
| **Hybrid Dev** | `just dev` | Daily development with hot-reload |
| **Docker Local** | `just up-local` | Testing Docker images |
| **Docker Prod** | `just up` | Running GHCR production images |

## AI Usage Guidelines

### When User is Implementing Features

**ALWAYS ensure `just dev` is running** before coding:

```
Before we start, is your dev environment running? 
Run `just dev-status` to check, or `just dev` to start it.
```

**Why?** With `just dev`:
- CSS changes appear instantly in browser
- React changes hot-reload without refresh
- No Docker rebuilds needed

### When to use which command

| Scenario | Command |
|----------|---------|
| Daily development | `just dev` |
| Testing Dockerfile changes | `just up-local` |
| Testing production images | `just fresh` |
| Pre-release verification | `just fresh-local` then `just fresh` |
