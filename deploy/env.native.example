# Astradraw - Native Development Environment
#
# This file contains environment variables for running backend and room-service
# NATIVELY (not in Docker) while infrastructure runs in Docker.
#
# Usage:
#   1. Copy to backend/.env:    cp deploy/env.native.example backend/.env
#   2. Copy to room-service/.env: cp deploy/env.native.example room-service/.env
#   3. Start infrastructure:    just up-infra
#   4. Start native services:   just dev-backend / just dev-room
#
# Note: Frontend uses Vite's .env files in frontend/ directory.
# For frontend env vars, see frontend/excalidraw-app/.env.development

# =============================================================================
# DOMAIN CONFIGURATION
# =============================================================================

# Your domain (should match /etc/hosts entry)
APP_DOMAIN=draw.local
APP_PROTOCOL=https
APP_URL=https://draw.local

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL runs in Docker, exposed on localhost:5432

# Option 1: Use DATABASE_URL (recommended for native dev)
DATABASE_URL=postgresql://excalidraw:excalidraw@localhost:5432/excalidraw?schema=public

# Option 2: Individual settings (if not using DATABASE_URL)
# POSTGRES_HOST=localhost
# POSTGRES_PORT=5432
# POSTGRES_USER=excalidraw
# POSTGRES_PASSWORD=excalidraw
# POSTGRES_DB=excalidraw

# =============================================================================
# S3/MINIO CONFIGURATION
# =============================================================================
# MinIO runs in Docker, exposed on localhost:9000

STORAGE_BACKEND=s3
S3_ENDPOINT=http://localhost:9000
S3_BUCKET=excalidraw
S3_REGION=us-east-1
S3_FORCE_PATH_STYLE=true

# MinIO credentials - read from deploy/secrets/ or set directly
# These should match what's in deploy/secrets/minio_access_key and minio_secret_key
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin

# =============================================================================
# AUTHENTICATION
# =============================================================================

# JWT Secret - use same value as in deploy/secrets/jwt_secret
JWT_SECRET=dev-secret-change-in-production

# Local authentication
ENABLE_LOCAL_AUTH=true
ENABLE_REGISTRATION=true
ADMIN_USERNAME=admin
ADMIN_PASSWORD=admin
ADMIN_EMAIL=admin@localhost

# Super admin emails
SUPERADMIN_EMAILS=admin@localhost

# =============================================================================
# OIDC (Optional - for testing with Dex)
# =============================================================================
# Uncomment if using Dex OIDC provider (start with: just up-infra --profile oidc)

# OIDC_ISSUER_URL=https://draw.local/dex
# OIDC_CLIENT_ID=astradraw
# OIDC_CLIENT_SECRET=astradraw-secret-change-in-production
# OIDC_CALLBACK_URL=https://draw.local/api/v2/auth/callback

# =============================================================================
# SERVICE PORTS
# =============================================================================

# Backend API port
PORT=8080

# Room service port (only used by room-service)
# ROOM_PORT=3002

# =============================================================================
# OPTIONAL FEATURES
# =============================================================================

# GIPHY API key (for Stickers & GIFs)
# GIPHY_API_KEY=your_giphy_api_key

# Kinescope (for Talktrack video recordings)
# KINESCOPE_API_KEY=your_kinescope_api_key
# KINESCOPE_PROJECT_ID=your_project_id

# Debug logging
DEBUG_NAVIGATION=false
LOG_LEVEL=log

# =============================================================================
# ROOM SERVICE SPECIFIC
# =============================================================================
# These are only used by room-service

CORS_ORIGIN=*
DEBUG=*

